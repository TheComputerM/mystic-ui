{"id":"text-reveal","dependencies":["motion"],"content":"import { scroll } from \"motion\";\nimport {\n\ttype Component,\n\tFor,\n\tcreateSignal,\n\tmergeProps,\n\tonMount,\n} from \"solid-js\";\nimport { css, cx } from \"styled-system/css\";\n\ninterface TextRevealByWordProps {\n\ttext: string;\n\tspace?: number;\n\tclass?: string;\n}\n\nexport const TextReveal: Component<TextRevealByWordProps> = (props) => {\n\tconst localProps = mergeProps({ space: 200 }, props);\n\tconst words = () => localProps.text.split(\" \");\n\tconst [scrollY, setScrollY] = createSignal(0);\n\n\tlet targetRef!: HTMLDivElement;\n\tonMount(() => {\n\t\tscroll(\n\t\t\t(info) => {\n\t\t\t\tsetScrollY(info.y.progress);\n\t\t\t},\n\t\t\t{\n\t\t\t\ttarget: targetRef,\n\t\t\t},\n\t\t);\n\t});\n\n\treturn (\n\t\t<div\n\t\t\tref={targetRef}\n\t\t\tclass={cx(css({ position: \"relative\" }), localProps.class)}\n\t\t\tstyle={{\n\t\t\t\theight: `calc(100vh + ${words().length * localProps.space}px)`,\n\t\t\t}}\n\t\t>\n\t\t\t<div\n\t\t\t\tclass={css({\n\t\t\t\t\tposition: \"sticky\",\n\t\t\t\t\ttop: \"0\",\n\t\t\t\t\theight: \"screen\",\n\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\talignItems: \"center\",\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<p class={css({ display: \"flex\", flexWrap: \"wrap\", gap: \"2\" })}>\n\t\t\t\t\t<For each={words()}>\n\t\t\t\t\t\t{(word, i) => {\n\t\t\t\t\t\t\tconst opacity = () =>\n\t\t\t\t\t\t\t\tMath.min(1, Math.max(0.15, scrollY() * words().length - i()));\n\t\t\t\t\t\t\treturn <span style={{ opacity: opacity() }}>{word}&nbsp;</span>;\n\t\t\t\t\t\t}}\n\t\t\t\t\t</For>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n"}